ir_learn_mode_on_bedroom:
  alias: IR Learn Mode On (Bedroom)
  mode: single
  icon: mdi:remote
  sequence:
  - action: mqtt.publish
    data:
      topic: zigbee2mqtt/Bedroom Smart IR Remote Control/set
      payload: '{"learn_ir_code":"ON"}'
      qos: 0
      retain: false
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script - Bedroom IR device is now on Learn Mode"
ir_turn_on_off_bedroom_tv:
  alias: IR Toggle Bedroom TV
  mode: single
  icon: mdi:remote-tv
  sequence:
  - action: mqtt.publish
    data:
      topic: zigbee2mqtt/Bedroom Smart IR Remote Control/set
      payload: '{"ir_code_to_send": "BaIjxREpAkABB4QCKQK6BikCQAfgBwFAF0ADQAFAB+AHA0ABwDdAG+AHAUATwANAAcALwAcJTJ6iI9oIKQL//+BLBwCE4EZX4AdP4AcP4E/H4DdX4Gen4A9v4A8X4DffCSkC//+iI9oIKQI="}'
      qos: 0
      retain: false
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script - Bedroom IR to turn ON/OFF TV has been triggered"
turn_off_on_kitchen_light:
  alias: Toggle Kitchen Light
  description: ''
  mode: single
  icon: mdi:ceiling-light-multiple
  sequence:
  - action: light.toggle
    target:
      entity_id: light.kitchen_l1
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F916 Automation – \U0001F4A1 Kitchen Light is {{\n  'on' if
        is_state('light.kitchen_l1', 'off') else 'off'\n}} \U0001F52A\n"
turn_on_switcher_for_60mins:
  alias: Turn ON Boiler for 60 minutes
  mode: single
  icon: mdi:water-boiler-auto
  sequence:
  - action: switch.turn_on
    target:
      entity_id: switch.switcher_boiler_43b9
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script – Boiler turned on for 60 minutes \U0001F525"
  - delay:
      hours: 1
  - action: switch.turn_off
    target:
      entity_id: switch.switcher_boiler_43b9
    data: {}
toggle_living_room_ac:
  alias: Toggle Living Room AC
  mode: single
  icon: mdi:air-conditioner
  sequence:
  - action: remote.send_command
    target:
      entity_id: remote.livingroom_broadlink_remote
    data:
      device: livingroom_ac
      command: toggle
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script – ❄️ Living Room Broadlink AC toggle activated \U0001F6CB️"
home_leave:
  alias: Home Leave
  sequence:
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F916 Automation - Home Leave activated!"
  - repeat:
      while:
      - condition: template
        value_template: '{{ is_state(''input_select.bedroom_tv_status'', ''On'') or
          is_state(''input_select.living_room_tv_status'', ''On'') or is_state(''input_select.balcony_tv_status'',
          ''On'')}}'
      sequence:
      - choose:
        - conditions:
          - condition: state
            entity_id: input_select.bedroom_tv_status
            state: 'On'
          sequence:
          - action: mqtt.publish
            data:
              topic: zigbee2mqtt/Bedroom Smart IR Remote Control/set
              payload: '{"ir_code_to_send": "BaIjxREpAkABB4QCKQK6BikCQAfgBwFAF0ADQAFAB+AHA+ADAUAb4AcBQBPAA0ABwAvABwn5nWEj8wg5Av//4GIHAgg5Ag=="}'
              qos: 0
              retain: false
        enabled: true
      - choose:
        - conditions:
          - condition: state
            entity_id: input_select.living_room_tv_status
            state: 'On'
          sequence:
          - action: script.ir_toggle_living_room_tv
            data: {}
      - choose:
        - conditions:
          - condition: state
            entity_id: input_select.balcony_tv_status
            state: 'On'
          sequence:
          - action: script.ir_toggle_balcony_tv
            data: {}
      - delay:
          hours: 0
          minutes: 11
          seconds: 30
          milliseconds: 0
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F916 Automation - Home Leave electric devices are OFF!"
  - continue_on_error: true
    action: light.turn_off
    target:
      area_id:
      - bedroom
      - kitchen
      - living_room
      - shower
      - balcony
      - office_room
      - hallway
      entity_id: light.kids_room
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F916 Automation - House devices are OFF!"
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.ofir_honor_magic_5_pro_android_auto
        state: 'on'
      sequence:
      - action: notify.mobile_app_ofir_honor_magic_5_pro
        data:
          message: "\U0001F916 Automation - House devices are OFF!"
          data:
            car_ui: true
            channel: Driving alerts
            importance: high
            notification_icon: mdi:power-plug-off
  mode: single
  icon: mdi:hand-wave
turn_on_boiler_for_35_minutes:
  alias: Turn ON Boiler for 35 minutes
  mode: single
  icon: mdi:water-boiler-auto
  sequence:
  - action: switch.turn_on
    target:
      entity_id: switch.switcher_boiler_43b9
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script – Boiler turned on for 35 minutes \U0001F525"
  - delay:
      minutes: 35
  - action: switch.turn_off
    target:
      entity_id: switch.switcher_boiler_43b9
    data: {}
turn_on_boiler_for_45_minutes:
  alias: Turn ON Boiler for 45 minutes
  mode: single
  icon: mdi:water-boiler-auto
  sequence:
  - action: switch.turn_on
    target:
      entity_id: switch.switcher_boiler_43b9
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script – Boiler turned on for 45 minutes \U0001F525"
  - delay:
      minutes: 45
  - action: switch.turn_off
    target:
      entity_id: switch.switcher_boiler_43b9
    data: {}
toggle_living_room_light:
  alias: Toggle Living Room Light
  mode: single
  icon: mdi:ceiling-light
  sequence:
  - action: light.toggle
    target:
      entity_id:
      - light.living_room_l1
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script – Living Room Light has been triggered! \U0001F6CB️"
toggle_bedroom_light:
  alias: Toggle Bedroom Light
  mode: single
  icon: mdi:ceiling-fan-light
  sequence:
  - action: light.toggle
    target:
      entity_id: light.bedroom
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script - Bedroom Light has been triggered!"
unlock_main_door:
  alias: Unlock Main Door
  mode: single
  icon: mdi:lock-open
  sequence:
  - action: lock.unlock
    target:
      entity_id: lock.home_door
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script – \U0001F6AA Main Door has been Unlocked \U0001F510"
boil_tami4_water:
  alias: Boil Tami4 Water
  sequence:
  - action: button.press
    metadata: {}
    data: {}
    target:
      entity_id: button.tami4_boil_water
  - data:
      message: "\U0001F4DC Script -  Boil Tami4 Water has been triggered!"
    action: notify.supervisor_telegram
  - if:
    - condition: state
      entity_id: person.elian
      state: home
    then:
    - action: notify.mobile_app_elians_iphone
      metadata: {}
      data:
        message: ♨️ Boiling Tami4 Water ♨️
    alias: If Elian Home - Notification
  - alias: If TV ON - Notification
    if:
    - condition: state
      entity_id: input_select.living_room_tv_status
      state: 'On'
    then:
    - action: notify.lg_webos_tv_75ur78006ll
      data:
        message: ♨️ Boiling Tami4 Water ♨️
  - alias: If Master Bedroom TV ON - Notification
    if:
    - condition: state
      entity_id: input_select.bedroom_tv_status
      state: 'On'
    then:
    - action: notify.lg_webos_tv_50ua80006lc_dmfulwe
      data:
        message: ♨️ Boiling Tami4 Water ♨️
  description: ''
  icon: mdi:kettle-steam
turn_all_lights_off:
  alias: Turn ALL Lights OFF
  description: ''
  icon: mdi:lamps-outline
  mode: single
  sequence:
  - action: light.turn_off
    target:
      area_id:
      - bedroom
      - kitchen
      - living_room
      - shower
      - balcony
      - office_room
      - hallway
      entity_id: light.kids_room
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script – All house lights have been turned off! \U0001F4A1\U0001F50C"
send_doorbell_notification_to_lg_tv:
  alias: Send Doorbell Notification to Living Room TV
  description: Sends notification with doorbell snapshot to Living Room TV when TV
    is on
  sequence:
  - if:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.living_room_tv_status
        state: 'Off'
    then:
    - action: notify.living_room_tv
      data:
        data:
          duration: 10
          position: top-left
          fontsize: medium
          transparency: 50%
          timeout: 10
          color: cyan
          interrupt: 0
          image:
            path: /config/www/tmp/snapshot_doorbell.jpg
        message: "\U0001F916 Automation - \U0001F514 Doorbell Ring Detected! \U0001F4F8
          Snapshot Captured!"
        title: Doorbell Notification
send_doorbell_notification_to_bedroom_tv:
  alias: Send Doorbell Notification to Master Bedroom TV
  description: Sends notification with doorbell snapshot to Master Bedroom TV when
    TV is on
  sequence:
  - if:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.bedroom_tv_status
        state: 'Off'
    then:
    - action: notify.bedroom_tv
      data:
        message: "\U0001F916 Automation - \U0001F514 Doorbell Ring Detected! \U0001F4F8
          Snapshot Captured!"
        title: Doorbell Notification
        data:
          duration: 10
          position: top-left
          fontsize: medium
          transparency: 50%
          timeout: 10
          color: cyan
          interrupt: 0
          image:
            path: /config/www/tmp/snapshot_doorbell.jpg
fetch_calendar_events:
  alias: Fetch Calendar Events for Today
  sequence:
  - variables:
      today: '{{ now().date() }}'
      tomorrow: '{{ (now().date() + timedelta(days=1)) }}'
      calendar_entities:
      - entity: calendar.calendar_2
        label: "\U0001F469\U0001F3FD"
      - entity: calendar.ofirx3_gmail_com
        label: "\U0001F468"
      - entity: calendar.real_madrid
        label: ⚽
      - entity: calendar.hapoel_tel_aviv
        label: ⚽
      - entity: calendar.champions_league
        label: ⚽
      - entity: calendar.birthdays_2
        label: "\U0001F389"
  - action: calendar.get_events
    target:
      entity_id: '{{ calendar_entities | map(attribute=''entity'') | list }}'
    data:
      start_date_time: '{{ today | string + ''T00:00:00'' }}'
      end_date_time: '{{ tomorrow | string + ''T00:00:00'' }}'
    response_variable: calendar_events
  - stop: Done
    response_variable: calendar_events
house_clean:
  alias: House Clean
  description: ''
  sequence:
  - action: vacuum.start
    target:
      entity_id: vacuum.s8_pro_ultra
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F916 Automation - Robot Vacuum Clean House Alexa \U0001F9FC"
toggle_dining_table_light:
  alias: Toggle Dining Table Light
  description: ''
  mode: single
  icon: mdi:ceiling-light-multiple
  sequence:
  - action: light.toggle
    target:
      entity_id:
      - light.dining_table_l1
      - light.dining_table_l2
    data: {}
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F916 Automation – \U0001F4A1 Dining Table Light is {{\n  'on'
        if is_state('light.living_room_l2', 'off') else 'off'\n}} \U0001F37D️\n"
notify_elian_arrived_home:
  alias: Notify – Elian Arrived Home
  mode: single
  sequence:
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F916 Automation – \U0001F469\U0001F3FD Elian has arrived home
        \U0001F3E0"
notify_elian_left_home:
  alias: Notify – Elian Left Home
  mode: single
  sequence:
  - variables:
      msg: "\U0001F916 Automation – \U0001F469\U0001F3FD Elian has left the house
        \U0001F3E0"
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: '{{ msg }}'
  - choose:
    - conditions:
      - condition: state
        entity_id: binary_sensor.ofir_honor_magic_5_pro_android_auto
        state: 'on'
      sequence:
      - action: notify.mobile_app_ofir_honor_magic_5_pro
        data:
          message: '{{ msg }}'
          data:
            car_ui: true
            channel: Driving alerts
            importance: high
            notification_icon: mdi:car
ir_learn_mode_on_balcony:
  sequence:
  - action: mqtt.publish
    data:
      topic: zigbee2mqtt/Balcony Smart IR Remote Control/set
      payload: '{"learn_ir_code":"ON"}'
      qos: 0
      retain: false
  - action: notify.send_message
    data:
      message: "\U0001F4DC Script - Balcony IR device is now on Learn Mode"
    target:
      entity_id: notify.supervisor_telegram
  alias: IR Learn Mode On (Balcony)
  mode: single
  icon: mdi:remote
  description: ''
ir_toggle_balcony_tv:
  sequence:
  - action: mqtt.publish
    data:
      topic: zigbee2mqtt/Balcony Smart IR Remote Control/set
      payload: '{"ir_code_to_send": "BUAjmxErAuADAQOsBisC4AcBQBPAA0ABwAvgCwdAAUAXQAFAB0AD4AMBwA/AB0ABCV6gQCPuCCsC///gAgcCCCsC"}'
      qos: 0
      retain: false
  - action: notify.send_message
    data:
      message: "\U0001F4DC Script - Balcony IR to turn ON/OFF TV has been triggered"
    target:
      entity_id: notify.supervisor_telegram
  alias: IR Toggle Balcony TV
  mode: single
  icon: mdi:remote-tv
  description: ''
building_entrance_door_unlock:
  alias: Building Entrance - Door Unlock
  mode: single
  sequence:
  - action: switch.turn_on
    target:
      entity_id:
      - switch.building_camera_fingerbot
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 4
      milliseconds: 0
  - action: switch.turn_on
    target:
      entity_id: switch.building_door_unlock_fingerbot
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script - \U0001F6AA Building Door unlocked by Fingerbot
        \U0001F3E2"
  description: ''
  icon: mdi:lock-open-variant
wake_shower_echo_random_spotify_playlist:
  alias: Wake Shower Echo - random Spotify playlist
  mode: restart
  sequence:
  - variables:
      playlist_uri: "{{ [\n  'spotify:playlist:3mp9kNj2SdzziDBHAJJ3s1',\n  'spotify:playlist:19x1tlgbyvG7xatQ3UX4Qk',\n
        \ 'spotify:playlist:6eYN2mMJ7sjLM49eXbwe7i'\n] | random }}\n"
  - action: spotcast.play_media
    data:
      media_player:
        entity_id:
        - media_player.balcony_echo_dot_215z7qyr7dvusnoxesjixyxoi_spotcast_3
      account: 01KAB2YAREPM46QYFDTBFC0CWH
      spotify_uri: '{{ playlist_uri }}'
      data:
        volume: 70
        shuffle: true
        random: true
  - delay:
      hours: 0
      minutes: 0
      seconds: 7
      milliseconds: 0
  - action: notify.send_message
    data:
      message: "\U0001F4DC Script - \U0001F3B5 Shower Music Script - {{ state_attr('media_player.balcony_echo_dot',
        'media_album_name') }} \U0001F6BF\n"
    target:
      entity_id: notify.supervisor_telegram
wake_kitchen_echo_random_spotify_playlist:
  sequence:
  - variables:
      playlist_uri: "{{ [\n  'spotify:playlist:3mp9kNj2SdzziDBHAJJ3s1',\n  'spotify:playlist:19x1tlgbyvG7xatQ3UX4Qk',\n
        \ 'spotify:playlist:6eYN2mMJ7sjLM49eXbwe7i'\n] | random }}\n"
  - action: spotcast.play_media
    data:
      media_player:
        entity_id: media_player.kitchen_echo_dot_215z7qyr7dvusnoxesjixyxoi_spotcast_2
      account: 01KAB2YAREPM46QYFDTBFC0CWH
      spotify_uri: '{{ playlist_uri }}'
      data:
        volume: 50
        shuffle: true
        random: true
  - delay:
      hours: 0
      minutes: 0
      seconds: 7
      milliseconds: 0
  - action: notify.send_message
    data:
      entity_id: notify.supervisor_telegram
      message: "\U0001F4DC Script - \U0001F3B5 Kitchen Music Script - {{ state_attr('media_player.kitchen_echo_dot',
        'media_album_name') }} \U0001F6BF\n"
  alias: Wake Kitchen Echo - random Spotify playlist
  mode: restart
  description: ''
send_doorbell_notification_to_balcony_tv:
  sequence:
  - if:
    - condition: not
      conditions:
      - condition: state
        entity_id: input_select.balcony_tv_status
        state: 'Off'
    then:
    - action: notify.balcony_tv
      data:
        data:
          duration: 10
          position: top-left
          fontsize: medium
          transparency: 50%
          timeout: 10
          color: cyan
          interrupt: 0
          image:
            path: /config/www/tmp/snapshot_doorbell.jpg
        message: "\U0001F916 Automation - \U0001F514 Doorbell Ring Detected! \U0001F4F8
          Snapshot Captured!"
        title: Doorbell Notification
  alias: Send Doorbell Notification to Balcony TV
  description: Sends notification with doorbell snapshot to Living Room TV when TV
    is on
kids_room_echo_random_spotify_playlist:
  sequence:
  - variables:
      raw_items: '{{ state_attr(''sensor.spotify_kids_uris'', ''items'') }}'
      items: '{{ raw_items.split('', '') if raw_items is string else raw_items }}'
      playlist_uri: '{{ (items | random) if (items | length) > 0 else ''spotify:playlist:37i9dQZF1DX8tYYl2HSCud''
        }}'
  - action: spotcast.play_media
    data:
      media_player:
        entity_id:
        - media_player.master_bedroom_shower_echo_dot_215z7qyr7dvusnoxesjixyxoi_spotcast_3
      account: 01KAB2YAREPM46QYFDTBFC0CWH
      spotify_uri: '{{ playlist_uri }}'
      data:
        volume: 55
        shuffle: true
  - delay:
      hours: 0
      minutes: 0
      seconds: 3
      milliseconds: 0
  - action: media_player.shuffle_set
    metadata: {}
    target:
      device_id: 86ba0c575ee9202fa82ac55b73ab1165
    data:
      shuffle: true
  - wait_template: '{{ state_attr(''media_player.master_bedroom_shower_echo_dot'',
      ''media_album_name'') not in [none, ''''] }}

      '
    timeout: 00:00:25
    continue_on_timeout: true
  - action: notify.send_message
    target:
      entity_id: notify.supervisor_telegram
    data:
      message: "\U0001F4DC Script - \U0001F3B5 Kids Room Music - {{\n  state_attr('media_player.master_bedroom_shower_echo_dot',
        'media_album_name')\n  or state_attr('media_player.master_bedroom_shower_echo_dot',
        'media_title')\n  or 'unknown'\n}} \U0001F9F8\n"
  alias: 'Kids Room Echo - Random Spotify Playlist '
  mode: restart
  description: ''
living_room_echo_random_spotify_playlist:
  sequence:
  - variables:
      raw_items: '{{ state_attr(''sensor.spotify_kids_uris'', ''items'') }}'
      items: '{{ raw_items.split('', '') if raw_items is string else raw_items }}'
      playlist_uri: '{{ (items | random) if (items | length) > 0 else ''spotify:playlist:37i9dQZF1DX8tYYl2HSCud''
        }}'
  - action: spotcast.play_media
    data:
      media_player:
        device_id: d00953a99c35a74268d26e7753c199fc
      account: 01KAB2YAREPM46QYFDTBFC0CWH
      spotify_uri: '{{ playlist_uri }}'
      data:
        volume: 35
        shuffle: true
        random: true
  - delay:
      hours: 0
      minutes: 0
      seconds: 7
      milliseconds: 0
  - action: notify.send_message
    data:
      message: "\U0001F4DC Script - \U0001F3B5 Living Room Music Script - {{ state_attr('media_player.livingroom_echo_pop',
        'media_album_name') }} \U0001F6CB️\n"
    target:
      entity_id: notify.supervisor_telegram
  alias: 'Living Room Echo - Random Spotify Playlist '
  mode: restart
  description: ''
ir_toggle_living_room_tv:
  sequence:
  - action: mqtt.publish
    data:
      topic: zigbee2mqtt/Living Room Smart IR Remote Control/set
      payload: '{"ir_code_to_send": "BWkjrBFAAsABA8oGQALgCwFAF0ADQAFAB+AHA+ADAUAb4AcBQBPAA0ABwAvABwk3nmkj3ghAAv//4AIHAghAAg=="}'
      qos: 0
      retain: false
  - action: notify.send_message
    data:
      message: "\U0001F4DC Script - Living Room IR to turn ON/OFF TV has been triggered"
    target:
      entity_id: notify.supervisor_telegram
  alias: IR Toggle Living Room TV
  mode: single
  icon: mdi:remote-tv
  description: ''
guest_bathroom_echo_random_spotify_playlist:
  sequence:
  - variables:
      raw_items: '{{ state_attr(''sensor.spotify_kids_uris'', ''items'') }}'
      items: '{{ raw_items.split('', '') if raw_items is string else raw_items }}'
      playlist_uri: '{{ (items | random) if (items | length) > 0 else ''spotify:playlist:37i9dQZF1DX8tYYl2HSCud''
        }}'
  - action: spotcast.play_media
    data:
      account: 01KAB2YAREPM46QYFDTBFC0CWH
      spotify_uri: '{{ playlist_uri }}'
      data:
        volume: 65
        shuffle: true
      media_player:
        entity_id: media_player.guest_bathroom_echo_dot_215z7qyr7dvusnoxesjixyxoi_spotcast
  - delay:
      hours: 0
      minutes: 0
      seconds: 7
      milliseconds: 0
  - action: notify.send_message
    data:
      message: "\U0001F4DC Script - \U0001F3B5 Guest Bathroom Music Script - {{ state_attr('media_player.guest_bathroom_echo_dot',
        'media_album_name') }} \U0001F6CB️\n"
    target:
      entity_id: notify.supervisor_telegram
  alias: Guest Bathroom Echo - Random Spotify Playlist
  mode: restart
  description: ''
